(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5de1b188"],{"009c":function(t,s,o){"use strict";var e=o("bf11"),i=o.n(e);i.a},"0639":function(t,s,o){"use strict";var e=o("7378"),i=o.n(e);i.a},"1dc0":function(t,s,o){},"58b2":function(t,s,o){"use strict";o.r(s);var e=function(){var t=this,s=t.$createElement,o=t._self._c||s;return o("div",{staticClass:"goods"},[o("div",{staticClass:"menu-wrapper"},[o("ul",t._l(t.goods,function(s,e){return o("a",{key:e,staticClass:"menu-item",class:{current:t.resultNum===e},attrs:{tag:"li",href:"javascript:void(0); "},on:{click:function(s){return t.tabClass(e)}}},[o("span",{staticClass:"text"},[o("span",{directives:[{name:"show",rawName:"v-show",value:s.type>0,expression:"item.type>0"}],staticClass:" icon",class:t.classMap[s.type]}),t._v(t._s(s.name)+"\n                ")])])}),0)]),o("div",{staticClass:"foods-wrapper",attrs:{id:"foodWrapper"}},[o("ul",t._l(t.goods,function(s,e){return o("li",{key:e,staticClass:"food-list food-list-hook"},[o("h1",{staticClass:"title",attrs:{id:"list"+e}},[t._v(t._s(s.name))]),o("ul",t._l(s.foods,function(s,e){return o("li",{key:e,staticClass:"food-item",on:{click:function(o){return t.selectFood(s)}}},[o("div",{staticClass:"icon"},[o("img",{attrs:{src:s.icon,alt:"",width:"57"}})]),o("div",{staticClass:"content"},[o("h2",{staticClass:"name"},[t._v(t._s(s.name))]),o("p",{staticClass:"desc"},[t._v(t._s(s.description))]),o("div",{staticClass:"extra"},[o("span",{staticClass:"count"},[t._v("月售"+t._s(s.sellCount))]),o("span",{staticClass:"count"},[t._v("好评"+t._s(s.rating))])]),o("div",{staticClass:"price"},[o("span",{staticClass:"now"},[t._v("￥"+t._s(s.price))]),o("span",{directives:[{name:"show",rawName:"v-show",value:s.oldPrice,expression:"food.oldPrice"}],staticClass:"old"},[t._v("￥"+t._s(s.oldPrice))])]),o("div",{staticClass:"cartControl",on:{click:function(s){return s.stopPropagation(),t.target(s)}}},[o("cartControl",{attrs:{food:s},on:{result:t.resultFoods}})],1)])])}),0)])}),0)]),o("div",[o("shopcart",{attrs:{selectFood:t.resultfoods,deliveryPrice:t.seller.deliveryPrice,minPrice:t.seller.minPrice,pos:t.position}}),o("food",{ref:"food",attrs:{food:t.selectedFood}})],1)])},i=[],a=(o("7f7f"),o("ac6a"),o("8f41")),n=function(){var t=this,s=t.$createElement,o=t._self._c||s;return o("div",{staticClass:"cartControl-wrapper"},[o("transition",{attrs:{name:"fade"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:t.food.count>0,expression:"food.count>0"}],staticClass:"cart-decrease",on:{click:function(s){return s.preventDefault(),t.decreaseCart(s)}}},[o("transition",{attrs:{name:"inner"}},[o("span",{staticClass:"inner iconfont icon-jian"})])],1)]),o("span",{directives:[{name:"show",rawName:"v-show",value:t.food.count>0,expression:"food.count > 0"}],staticClass:"cart-count"},[t._v(t._s(t.food.count))]),o("span",{staticClass:"iconfont icon-jia cart-add",on:{click:function(s){return s.preventDefault(),t.addCart(s)}}})],1)},r=[],c={props:["food"],data:function(){return{}},methods:{addCart:function(){this.food.count?this.food.count++:this.$set(this.food,"count",1),this.$emit("result",this.food)},decreaseCart:function(){0!==this.food.count&&(this.food.count--,this.$emit("result",this.food))}},created:function(){}},l=c,u=(o("af82"),o("2877")),d=Object(u["a"])(l,n,r,!1,null,null,null),f=d.exports,h=function(){var t=this,s=t.$createElement,o=t._self._c||s;return o("div",[o("div",{staticClass:"shopCart"},[o("div",{staticClass:"content",on:{click:function(s){return s.stopPropagation(),t.toggleList()}}},[o("div",{staticClass:"content-left"},[o("div",{ref:"num",staticClass:"logo-wrapper"},[o("div",{staticClass:"logo",class:{highlight:t.totalCount>0}},[o("i",{staticClass:"iconfont icon-gouwuche",class:{highlight:t.totalCount>0}})]),o("div",{directives:[{name:"show",rawName:"v-show",value:t.totalCount>0,expression:"totalCount > 0"}],staticClass:"num"},[t._v(t._s(t.totalCount))])]),o("div",{staticClass:"price",class:{highlight:t.totalPrice>0}},[t._v("￥"+t._s(t.totalPrice))]),o("div",{staticClass:"desc"},[t._v("另需配送费￥"+t._s(t.deliveryPrice)+"元")])]),o("div",{staticClass:"content-right"},[o("div",{staticClass:"pay",class:t.payClass},[0===t.totalPrice?o("div",[t._v(t._s(t.minPrice)+"元起送")]):t._e(),t.totalPrice<t.minPrice?o("div",[t._v("还差￥"+t._s(t.slowCount)+"元起送")]):t._e(),t.totalPrice>=t.minPrice?o("div",{on:{click:function(s){return s.stopPropagation(),t.pay(s)}}},[t._v("去结算")]):t._e()])]),o("div",{staticClass:"ball-container"},[o("transition",{on:{"before-enter":t.beforeEnter,enter:t.enter,"after-enter":t.afterEnter}},[o("div",{directives:[{name:"show",rawName:"v-show",value:t.pos.ballFlag,expression:"pos.ballFlag"}],ref:"ball",staticClass:"ball"},[o("div",{staticClass:"inner inner-hook"})])])],1)]),o("transition",{attrs:{name:"fade"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:t.listShow,expression:"listShow"}],staticClass:"shopcart-list"},[o("div",{staticClass:"list-header"},[o("h1",{staticClass:"title"},[t._v("购物车")]),o("span",{staticClass:"empty",on:{click:function(s){return s.stopPropagation(),t.empty(s)}}},[t._v("清空")])]),o("div",{staticClass:"list-content"},[o("ul",t._l(t.selectFood,function(s,e){return o("li",{directives:[{name:"show",rawName:"v-show",value:0!==s.count,expression:"food.count !== 0"}],key:e,staticClass:"shopcart-food"},[o("span",{staticClass:"name"},[t._v(t._s(s.name))]),o("div",{staticClass:"price"},[t._v("￥"+t._s(s.price*s.count))]),o("div",{staticClass:"cartControl-wrapper"},[o("cartControl",{attrs:{food:s}})],1)])}),0)])])])],1)])},p=[],v={props:["selectFood","deliveryPrice","minPrice","pos"],data:function(){return{fold:!0}},computed:{totalPrice:function(){var t=0;return this.selectFood.forEach(function(s){t+=s.price*s.count}),t},totalCount:function(){var t=0;return this.selectFood.forEach(function(s){t+=s.count}),t},slowCount:function(){return this.totalPrice-this.totalCount},payClass:function(){return this.totalPrice<this.minPrice?"not-enough":"enough"},listShow:function(){if(console.log(!this.totalCount),!this.totalCount)return!1;var t=!this.fold;return t}},methods:{toggleList:function(){this.totalCount&&(this.fold=!this.fold)},empty:function(){this.selectFood.forEach(function(t){t.count=0})},beforeEnter:function(t){t.style.left=this.pos.posX+"px",t.style.top=this.pos.posY+"px",t.style.transform="translate(0, 0)"},enter:function(t,s){t.offsetWidth;var o=this.$refs.num.getBoundingClientRect(),e=this.pos.posX-o.left,i=this.pos.posY-o.top;t.style.transform="translate(".concat(-e,"px, ").concat(-i,"px)"),t.style.transition="all 0.5s cubic-bezier(.4,-0.3,1,.68)",s()},afterEnter:function(t){this.pos.ballFlag=!this.pos.ballFlag},pay:function(){window.alert(this.totalPrice)}},components:{cartControl:f}},C=v,m=(o("0639"),Object(u["a"])(C,h,p,!1,null,null,null)),g=m.exports,w=function(){var t=this,s=t.$createElement,o=t._self._c||s;return o("transition",{attrs:{name:"fade"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:t.showFlag,expression:"showFlag"}],staticClass:"food"},[o("div",{staticClass:"fond-content"},[o("div",{staticClass:"image-header"},[o("img",{attrs:{src:t.food.image,alt:""}}),o("div",{staticClass:"back",on:{click:t.hide}},[o("i",{staticClass:"iconfont icon-weibiaoti6-copy"})])]),o("div",{staticClass:"content"},[o("h1",{staticClass:"title"},[t._v(t._s(t.food.name))]),o("div",{staticClass:"detail"},[o("span",{staticClass:"sell-count"},[t._v("月售"+t._s(t.food.sellCount)+"份")]),o("span",{staticClass:"rating"},[t._v("好评率"+t._s(t.food.rating)+"%")])]),o("div",{staticClass:"price"},[o("span",{staticClass:"now"},[t._v("￥"+t._s(t.food.price))]),o("span",{directives:[{name:"show",rawName:"v-show",value:t.food.oldPrice,expression:"food.oldPrice"}],staticClass:"old"},[t._v("￥"+t._s(t.food.oldPrice)+">")])]),o("div",{staticClass:"cartControl-wrapper"},[o("cartControl",{attrs:{food:t.food}})],1),o("transition",{attrs:{name:"buy"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:!t.food.count||0===t.food.count,expression:"!food.count || food.count === 0"}],staticClass:"buy",on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.addFirst(s)}}},[t._v("加入购物车")])])],1),o("split"),o("div",{directives:[{name:"show",rawName:"v-show",value:t.food.info,expression:"food.info"}],staticClass:"info"},[o("h1",{staticClass:"title"},[t._v("商品信息")]),o("p",{staticClass:"text"},[t._v(t._s(t.food.info))])])],1)])])},_=[],y=o("dda2"),b={data:function(){return{showFlag:!1}},props:["food"],components:{cartControl:f,split:y["a"]},created:function(){console.log(this.food)},methods:{show:function(){this.showFlag=!0},hide:function(){this.showFlag=!1},addFirst:function(){this.$set(this.food,"count",1)}}},P=b,F=(o("5c74"),Object(u["a"])(P,w,_,!1,null,null,null)),S=F.exports,L={data:function(){return{goods:[],listHeight:[],scrolly:0,selectedFood:{},current:0,resultfoods:[],position:{ballFlag:!1}}},props:["seller"],created:function(){this.goods=a.goods,console.log(this.goods),console.log(this.seller),this.classMap=["decrease","discount","special","invoice","guarantee"]},mounted:function(){this.$el.querySelector("#foodWrapper").addEventListener("scroll",this.handleScroll)},methods:{tabClass:function(t){this.current=t,this.$el.querySelector("#list"+t).scrollIntoView()},resultFoods:function(t){var s=this,o=!0;this.resultfoods.length?(this.resultfoods.forEach(function(e,i){if(e.name===t.name)return s.resultfoods.splice(i,1),s.resultfoods.push(t),void(o=!1)}),o&&this.resultfoods.push(t)):this.resultfoods.push(t),console.log(this.resultfoods)},target:function(t){console.log(t),this.position.ballFlag=!this.ballFlag,this.$set(this.position,"posX",t.pageX),this.$set(this.position,"posY",t.pageY),console.log(this.position)},selectFood:function(t){this.selectedFood=t,this.$refs.food.show()},handleScroll:function(){for(var t,s,o,e=0;e<this.goods.length;e++)e<this.goods.length-1?(t=this.$el.querySelector("#list"+e).offsetTop,s=this.$el.querySelector("#list"+(e+1)).offsetTop,o=this.$el.querySelector("#foodWrapper").scrollTop,console.log(t+"---"+o+"--"+s),t<=o&&s>=o&&(this.current=e)):(e=this.goods.length-1)?t<=o&&(this.current=e):(e=0)&&o<s&&(this.current=e)}},computed:{resultNum:function(){return this.current},selectedFoods:function(){var t=[];this.goods.forEach(function(s){s.foods.forEach(function(s){s.count&&t.push(s)})})}},components:{cartControl:f,shopcart:g,food:S}},x=L,k=(o("7383"),Object(u["a"])(x,e,i,!1,null,"f1158d7a",null));s["default"]=k.exports},"5c74":function(t,s,o){"use strict";var e=o("aff6"),i=o.n(e);i.a},7378:function(t,s,o){},7383:function(t,s,o){"use strict";var e=o("1dc0"),i=o.n(e);i.a},"7f7f":function(t,s,o){var e=o("86cc").f,i=Function.prototype,a=/^\s*function ([^ (]*)/,n="name";n in i||o("9e1e")&&e(i,n,{configurable:!0,get:function(){try{return(""+this).match(a)[1]}catch(t){return""}}})},ac6a:function(t,s,o){for(var e=o("cadf"),i=o("0d58"),a=o("2aba"),n=o("7726"),r=o("32e9"),c=o("84f2"),l=o("2b4c"),u=l("iterator"),d=l("toStringTag"),f=c.Array,h={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=i(h),v=0;v<p.length;v++){var C,m=p[v],g=h[m],w=n[m],_=w&&w.prototype;if(_&&(_[u]||r(_,u,f),_[d]||r(_,d,m),c[m]=f,g))for(C in e)_[C]||a(_,C,e[C],!0)}},aefd:function(t,s,o){},af82:function(t,s,o){"use strict";var e=o("aefd"),i=o.n(e);i.a},aff6:function(t,s,o){},bf11:function(t,s,o){},dda2:function(t,s,o){"use strict";var e=function(){var t=this,s=t.$createElement,o=t._self._c||s;return o("div",{staticClass:"split"})},i=[],a={},n=a,r=(o("009c"),o("2877")),c=Object(r["a"])(n,e,i,!1,null,"785a67e6",null);s["a"]=c.exports}}]);